{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.errorResponsePlugin = void 0;\nconst status_code_1 = require(\"../../status-code\");\nfunction isResponseLike(obj) {\n  return obj && typeof obj.writeHead === 'function';\n}\nfunction isSocketLike(obj) {\n  return obj && typeof obj.write === 'function' && !('writeHead' in obj);\n}\nconst errorResponsePlugin = (proxyServer, options) => {\n  proxyServer.on('error', (err, req, res, target) => {\n    // Re-throw error. Not recoverable since req & res are empty.\n    if (!req && !res) {\n      throw err; // \"Error: Must provide a proper URL as target\"\n    }\n    if (isResponseLike(res)) {\n      if (!res.headersSent) {\n        const statusCode = (0, status_code_1.getStatusCode)(err.code);\n        res.writeHead(statusCode);\n      }\n      const host = req.headers && req.headers.host;\n      res.end(`Error occurred while trying to proxy: ${host}${req.url}`);\n    } else if (isSocketLike(res)) {\n      res.destroy();\n    }\n  });\n};\nexports.errorResponsePlugin = errorResponsePlugin;","map":{"version":3,"names":["Object","defineProperty","exports","value","errorResponsePlugin","status_code_1","require","isResponseLike","obj","writeHead","isSocketLike","write","proxyServer","options","on","err","req","res","target","headersSent","statusCode","getStatusCode","code","host","headers","end","url","destroy"],"sources":["D:/respaldo jose/PROJECTS_V0/hub360/frontend/node_modules/http-proxy-middleware/dist/plugins/default/error-response-plugin.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.errorResponsePlugin = void 0;\nconst status_code_1 = require(\"../../status-code\");\nfunction isResponseLike(obj) {\n    return obj && typeof obj.writeHead === 'function';\n}\nfunction isSocketLike(obj) {\n    return obj && typeof obj.write === 'function' && !('writeHead' in obj);\n}\nconst errorResponsePlugin = (proxyServer, options) => {\n    proxyServer.on('error', (err, req, res, target) => {\n        // Re-throw error. Not recoverable since req & res are empty.\n        if (!req && !res) {\n            throw err; // \"Error: Must provide a proper URL as target\"\n        }\n        if (isResponseLike(res)) {\n            if (!res.headersSent) {\n                const statusCode = (0, status_code_1.getStatusCode)(err.code);\n                res.writeHead(statusCode);\n            }\n            const host = req.headers && req.headers.host;\n            res.end(`Error occurred while trying to proxy: ${host}${req.url}`);\n        }\n        else if (isSocketLike(res)) {\n            res.destroy();\n        }\n    });\n};\nexports.errorResponsePlugin = errorResponsePlugin;\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,mBAAmB,GAAG,KAAK,CAAC;AACpC,MAAMC,aAAa,GAAGC,OAAO,CAAC,mBAAmB,CAAC;AAClD,SAASC,cAAcA,CAACC,GAAG,EAAE;EACzB,OAAOA,GAAG,IAAI,OAAOA,GAAG,CAACC,SAAS,KAAK,UAAU;AACrD;AACA,SAASC,YAAYA,CAACF,GAAG,EAAE;EACvB,OAAOA,GAAG,IAAI,OAAOA,GAAG,CAACG,KAAK,KAAK,UAAU,IAAI,EAAE,WAAW,IAAIH,GAAG,CAAC;AAC1E;AACA,MAAMJ,mBAAmB,GAAGA,CAACQ,WAAW,EAAEC,OAAO,KAAK;EAClDD,WAAW,CAACE,EAAE,CAAC,OAAO,EAAE,CAACC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,MAAM,KAAK;IAC/C;IACA,IAAI,CAACF,GAAG,IAAI,CAACC,GAAG,EAAE;MACd,MAAMF,GAAG,CAAC,CAAC;IACf;IACA,IAAIR,cAAc,CAACU,GAAG,CAAC,EAAE;MACrB,IAAI,CAACA,GAAG,CAACE,WAAW,EAAE;QAClB,MAAMC,UAAU,GAAG,CAAC,CAAC,EAAEf,aAAa,CAACgB,aAAa,EAAEN,GAAG,CAACO,IAAI,CAAC;QAC7DL,GAAG,CAACR,SAAS,CAACW,UAAU,CAAC;MAC7B;MACA,MAAMG,IAAI,GAAGP,GAAG,CAACQ,OAAO,IAAIR,GAAG,CAACQ,OAAO,CAACD,IAAI;MAC5CN,GAAG,CAACQ,GAAG,CAAC,yCAAyCF,IAAI,GAAGP,GAAG,CAACU,GAAG,EAAE,CAAC;IACtE,CAAC,MACI,IAAIhB,YAAY,CAACO,GAAG,CAAC,EAAE;MACxBA,GAAG,CAACU,OAAO,CAAC,CAAC;IACjB;EACJ,CAAC,CAAC;AACN,CAAC;AACDzB,OAAO,CAACE,mBAAmB,GAAGA,mBAAmB","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}